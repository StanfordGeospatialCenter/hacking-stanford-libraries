
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <title>Step 9: Complete Integration · HonKit</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="HonKit 6.1.5">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/@honkit/honkit-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/@honkit/honkit-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="11-bonus-step-10-wikidata-filter.html" />
    
    
    <link rel="prev" href="09-step-08-wikidata-images.html" />
    

    </head>
    <body>
        
<div class="book honkit-cloak">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="00-workshop-introduction.html">
            
                <a href="00-workshop-introduction.html">
            
                    
                    Workshop Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Step-by-Step Tutorials</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="01-step-00-basic-html.html">
            
                <a href="01-step-00-basic-html.html">
            
                    
                    Step 0: Basic HTML Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="02-step-01-map-container.html">
            
                <a href="02-step-01-map-container.html">
            
                    
                    Step 1: Adding a Map Container
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="03-step-02-initialize-map.html">
            
                <a href="03-step-02-initialize-map.html">
            
                    
                    Step 2: Initialize Leaflet Map
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="04-step-03-geojson-points.html">
            
                <a href="04-step-03-geojson-points.html">
            
                    
                    Step 3: Load GeoJSON Points
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="05-step-04-popups.html">
            
                <a href="05-step-04-popups.html">
            
                    
                    Step 4: Add Popups
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="06-step-05-cog-from-stacks.html">
            
                <a href="06-step-05-cog-from-stacks.html">
            
                    
                    Step 5: Cloud Optimized GeoTIFF from Digital Stacks
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="07-step-06-split-layout.html">
            
                <a href="07-step-06-split-layout.html">
            
                    
                    Step 6: Split-Screen Layout
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="08-step-07-wikidata-basic.html">
            
                <a href="08-step-07-wikidata-basic.html">
            
                    
                    Step 7: Basic Wikidata Fetching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="09-step-08-wikidata-images.html">
            
                <a href="09-step-08-wikidata-images.html">
            
                    
                    Step 8: Wikidata Images
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.10" data-path="10-step-09-complete-integration.html">
            
                <a href="10-step-09-complete-integration.html">
            
                    
                    Step 9: Complete Integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.11" data-path="11-bonus-step-10-wikidata-filter.html">
            
                <a href="11-bonus-step-10-wikidata-filter.html">
            
                    
                    BONUS Step 10: Wikidata Filter
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Reference</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="DIGITAL-STACKS-REFERENCE.html">
            
                <a href="DIGITAL-STACKS-REFERENCE.html">
            
                    
                    Digital Stacks Reference
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="WORKSHOP-MATERIALS.html">
            
                <a href="WORKSHOP-MATERIALS.html">
            
                    
                    Workshop Materials Index
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="GLOSSARY.html">
            
                <a href="GLOSSARY.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://github.com/honkit/honkit" target="blank" class="gitbook-link">
            Published with HonKit
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Step 9: Complete Integration</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="step-9-complete-integration">Step 9: Complete Integration</h1>
<p>Live Demo: <a href="cog_map_step_09.html">cog_map_step_09.html</a></p>
<h2 id="overview">Overview</h2>
<p>In this final step, we'll create a fully-featured application by adding multiple <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> properties: artist names, creation dates, materials, and more. This demonstrates how to build a comprehensive information display from structured data.</p>
<h2 id="learning-objectives">Learning Objectives</h2>
<ul>
<li>Extract multiple properties from <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> entities</li>
<li>Create reusable helper functions for different data types</li>
<li>Handle entity references (links to other <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> items)</li>
<li>Format dates and complex data for display</li>
<li>Build rich, multi-faceted information panels</li>
<li>Understand <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a>'s <a href="GLOSSARY.html#linked-data" class="glossary-term" title="A method of connecting related data across different sources using references (like Wikidata items linking to other items).">linked data</a> structure</li>
</ul>
<h2 id="common-wikidata-properties-for-artworks">Common Wikidata Properties for Artworks</h2>
<table>
<thead>
<tr>
<th>Property</th>
<th>ID</th>
<th>Data Type</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Image</td>
<td>P18</td>
<td>File</td>
<td>"Sculpture_photo.jpg"</td>
</tr>
<tr>
<td>Creator</td>
<td>P170</td>
<td>Item (person)</td>
<td>Mark di Suvero (Q315277)</td>
</tr>
<tr>
<td>Discoverer or inventor</td>
<td>P61</td>
<td>Item (person)</td>
<td>George Segal (Q500837)</td>
</tr>
<tr>
<td>Inception</td>
<td>P571</td>
<td>Date</td>
<td>1980</td>
</tr>
<tr>
<td>Material</td>
<td>P186</td>
<td>Item</td>
<td>Bronze (Q34095)</td>
</tr>
<tr>
<td>Location</td>
<td>P276</td>
<td>Item</td>
<td>Stanford University (Q5083)</td>
</tr>
<tr>
<td>Genre</td>
<td>P136</td>
<td>Item</td>
<td>Public art (Q557141)</td>
</tr>
<tr>
<td>Height</td>
<td>P2048</td>
<td>Quantity</td>
<td>4.5 meters</td>
</tr>
<tr>
<td>Width</td>
<td>P2049</td>
<td>Quantity</td>
<td>3 meters</td>
</tr>
</tbody>
</table>
<p><strong>Understanding item references:</strong></p>
<ul>
<li>Properties like P170 (creator) don't store the name directly</li>
<li>They store a reference to another <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> item</li>
<li>We need to fetch that item to get the label (name)</li>
<li>This is called "<a href="GLOSSARY.html#linked-data" class="glossary-term" title="A method of connecting related data across different sources using references (like Wikidata items linking to other items).">linked data</a>"</li>
</ul>
<h2 id="the-complete-code">The Complete Code</h2>
<pre><code class="lang-html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">"en"</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">base</span> <span class="hljs-attr">target</span>=<span class="hljs-string">"_top"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">"utf-8"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"viewport"</span> <span class="hljs-attr">content</span>=<span class="hljs-string">"width=device-width, initial-scale=1"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Stanford Campus Map - Step 9: Complete Wikidata Integration<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"</span> <span class="hljs-attr">integrity</span>=<span class="hljs-string">"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">""</span>/&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"</span> <span class="hljs-attr">integrity</span>=<span class="hljs-string">"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="</span> <span class="hljs-attr">crossorigin</span>=<span class="hljs-string">""</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/proj4"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/georaster"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://unpkg.com/georaster-layer-for-leaflet"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">"stylesheet"</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"styles_wikidata.css"</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span>Stanford Public Art Map<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Step 9: Complete integration with all Wikidata properties<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"container"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"mapWrapper"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"map"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"wikidata-panel"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"no-selection"</span>&gt;</span>Click on an artwork to see Wikidata information<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript">

    <span class="hljs-keyword">const</span> map = L.<span class="hljs-title function_">map</span>(<span class="hljs-string">'map'</span>).<span class="hljs-title function_">setView</span>([<span class="hljs-number">37.427</span>, -<span class="hljs-number">122.169</span>], <span class="hljs-number">15</span>);

    <span class="hljs-keyword">const</span> tiles = L.<span class="hljs-title function_">tileLayer</span>(<span class="hljs-string">'https://tile.openstreetmap.org/{z}/{x}/{y}.png'</span>, {
        <span class="hljs-attr">maxZoom</span>: <span class="hljs-number">19</span>,
        <span class="hljs-attr">attribution</span>: <span class="hljs-string">'&amp;copy; &lt;a href="http://www.openstreetmap.org/copyright"&gt;OpenStreetMap&lt;/a&gt;'</span>
    }).<span class="hljs-title function_">addTo</span>(map);

    <span class="hljs-comment">// Helper function to fetch a label for a Wikidata item</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getWikidataLabel</span>(<span class="hljs-params">itemId</span>) {
        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://www.wikidata.org/wiki/Special:EntityData/<span class="hljs-subst">${itemId}</span>.json`</span>);
            <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
            <span class="hljs-keyword">const</span> entity = data.<span class="hljs-property">entities</span>[itemId];

            <span class="hljs-comment">// Return English label if available, otherwise return the item ID</span>
            <span class="hljs-keyword">return</span> entity.<span class="hljs-property">labels</span>.<span class="hljs-property">en</span> ? entity.<span class="hljs-property">labels</span>.<span class="hljs-property">en</span>.<span class="hljs-property">value</span> : itemId;
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error fetching label for <span class="hljs-subst">${itemId}</span>:`</span>, error);
            <span class="hljs-keyword">return</span> itemId;
        }
    }

    <span class="hljs-comment">// Helper function to get the image URL from Wikidata entity</span>
    <span class="hljs-keyword">function</span> <span class="hljs-title function_">getWikidataImage</span>(<span class="hljs-params">entity</span>) {
        <span class="hljs-comment">// Check if the entity has any claims (properties)</span>
        <span class="hljs-keyword">if</span> (!entity.<span class="hljs-property">claims</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

        <span class="hljs-comment">// Look for property P18 (image)</span>
        <span class="hljs-keyword">const</span> imageClaims = entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P18</span>;

        <span class="hljs-comment">// Check if P18 exists and has values</span>
        <span class="hljs-keyword">if</span> (!imageClaims || imageClaims.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;

        <span class="hljs-comment">// Get the first image filename from the claims</span>
        <span class="hljs-keyword">const</span> imageFilename = imageClaims[<span class="hljs-number">0</span>].<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>;

        <span class="hljs-comment">// Construct the Wikimedia Commons URL</span>
        <span class="hljs-keyword">return</span> <span class="hljs-string">`https://commons.wikimedia.org/wiki/Special:FilePath/<span class="hljs-subst">${<span class="hljs-built_in">encodeURIComponent</span>(imageFilename)}</span>`</span>;
    }

    <span class="hljs-comment">// Function to fetch and display complete Wikidata content</span>
    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">displayWikidataInfo</span>(<span class="hljs-params">wikidataId</span>) {
        <span class="hljs-keyword">const</span> panel = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'wikidata-panel'</span>);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-comment">// Fetch the Wikidata entity in JSON format</span>
            <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://www.wikidata.org/wiki/Special:EntityData/<span class="hljs-subst">${wikidataId}</span>.json`</span>);
            <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
            <span class="hljs-keyword">const</span> entity = data.<span class="hljs-property">entities</span>[wikidataId];

            <span class="hljs-comment">// Check if entity was found</span>
            <span class="hljs-keyword">if</span> (!entity) {
                panel.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;div id="no-selection"&gt;Wikidata not found&lt;/div&gt;'</span>;
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-comment">// Begin building the HTML content</span>
            <span class="hljs-keyword">let</span> html = <span class="hljs-string">'&lt;div class="wikidata-content"&gt;'</span>;

            <span class="hljs-comment">// Get and display the image if available</span>
            <span class="hljs-keyword">const</span> imageUrl = <span class="hljs-title function_">getWikidataImage</span>(entity);
            <span class="hljs-keyword">if</span> (imageUrl) {
                html += <span class="hljs-string">`&lt;img src="<span class="hljs-subst">${imageUrl}</span>" alt="Artwork image" class="wikidata-image"&gt;`</span>;
            }

            <span class="hljs-comment">// Extract and display the label (name)</span>
            <span class="hljs-keyword">const</span> label = entity.<span class="hljs-property">labels</span>.<span class="hljs-property">en</span> ? entity.<span class="hljs-property">labels</span>.<span class="hljs-property">en</span>.<span class="hljs-property">value</span> : wikidataId;
            html += <span class="hljs-string">`&lt;div class="wikidata-label"&gt;<span class="hljs-subst">${label}</span>&lt;/div&gt;`</span>;

            <span class="hljs-comment">// Extract and display the description</span>
            <span class="hljs-keyword">if</span> (entity.<span class="hljs-property">descriptions</span>.<span class="hljs-property">en</span>) {
                html += <span class="hljs-string">`&lt;div class="wikidata-description"&gt;<span class="hljs-subst">${entity.descriptions.en.value}</span>&lt;/div&gt;`</span>;
            }

            <span class="hljs-comment">// Extract and display the creator (P170)</span>
            <span class="hljs-keyword">if</span> (entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P170</span>) {
                <span class="hljs-keyword">const</span> creatorId = entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P170</span>[<span class="hljs-number">0</span>].<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>;
                <span class="hljs-keyword">const</span> creatorName = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getWikidataLabel</span>(creatorId);
                html += <span class="hljs-string">`&lt;div class="wikidata-property"&gt;&lt;strong&gt;Creator:&lt;/strong&gt; &lt;a href="https://www.wikidata.org/wiki/<span class="hljs-subst">${creatorId}</span>" target="_blank"&gt;<span class="hljs-subst">${creatorName}</span>&lt;/a&gt;&lt;/div&gt;`</span>;
            }

            <span class="hljs-comment">// Extract and display the discoverer or inventor (P61) - used for some sculptures</span>
            <span class="hljs-keyword">if</span> (entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P61</span>) {
                <span class="hljs-keyword">const</span> inventorId = entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P61</span>[<span class="hljs-number">0</span>].<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>;
                <span class="hljs-keyword">const</span> inventorName = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getWikidataLabel</span>(inventorId);
                html += <span class="hljs-string">`&lt;div class="wikidata-property"&gt;&lt;strong&gt;Artist:&lt;/strong&gt; &lt;a href="https://www.wikidata.org/wiki/<span class="hljs-subst">${inventorId}</span>" target="_blank"&gt;<span class="hljs-subst">${inventorName}</span>&lt;/a&gt;&lt;/div&gt;`</span>;
            }

            <span class="hljs-comment">// Extract and display inception date (P571)</span>
            <span class="hljs-keyword">if</span> (entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P571</span>) {
                <span class="hljs-keyword">const</span> dateValue = entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P571</span>[<span class="hljs-number">0</span>].<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">time</span>;
                <span class="hljs-comment">// Wikidata dates are in format: +1980-01-01T00:00:00Z</span>
                <span class="hljs-comment">// Extract the year</span>
                <span class="hljs-keyword">const</span> year = dateValue.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/[+-](\d{4})/</span>)[<span class="hljs-number">1</span>];
                html += <span class="hljs-string">`&lt;div class="wikidata-property"&gt;&lt;strong&gt;Date:&lt;/strong&gt; <span class="hljs-subst">${year}</span>&lt;/div&gt;`</span>;
            }

            <span class="hljs-comment">// Extract and display material (P186)</span>
            <span class="hljs-keyword">if</span> (entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P186</span>) {
                <span class="hljs-keyword">const</span> materials = [];
                <span class="hljs-comment">// Loop through all materials (there might be multiple)</span>
                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> claim <span class="hljs-keyword">of</span> entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P186</span>) {
                    <span class="hljs-keyword">const</span> materialId = claim.<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>;
                    <span class="hljs-keyword">const</span> materialName = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getWikidataLabel</span>(materialId);
                    materials.<span class="hljs-title function_">push</span>(<span class="hljs-string">`&lt;a href="https://www.wikidata.org/wiki/<span class="hljs-subst">${materialId}</span>" target="_blank"&gt;<span class="hljs-subst">${materialName}</span>&lt;/a&gt;`</span>);
                }
                html += <span class="hljs-string">`&lt;div class="wikidata-property"&gt;&lt;strong&gt;Material:&lt;/strong&gt; <span class="hljs-subst">${materials.join(<span class="hljs-string">', '</span>)}</span>&lt;/div&gt;`</span>;
            }

            <span class="hljs-comment">// Link to view the full Wikidata page</span>
            html += <span class="hljs-string">`&lt;div class="wikidata-property"&gt;&lt;a href="https://www.wikidata.org/wiki/<span class="hljs-subst">${wikidataId}</span>" target="_blank" class="wikidata-link"&gt;View on Wikidata&lt;/a&gt;&lt;/div&gt;`</span>;

            <span class="hljs-comment">// Close the div and update the panel</span>
            html += <span class="hljs-string">'&lt;/div&gt;'</span>;
            panel.<span class="hljs-property">innerHTML</span> = html;
        } <span class="hljs-keyword">catch</span> (error) {
            <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error fetching Wikidata:'</span>, error);
            panel.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;div id="no-selection"&gt;Error loading Wikidata information&lt;/div&gt;'</span>;
        }
    }

    <span class="hljs-keyword">var</span> url_to_geotiff_file = <span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">"collection/stanford_campus_irg.tif"</span>, <span class="hljs-variable language_">window</span>.<span class="hljs-property">location</span>.<span class="hljs-property">href</span>).<span class="hljs-property">href</span>;

    <span class="hljs-title function_">parseGeoraster</span>(url_to_geotiff_file).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">georaster</span> =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"georaster:"</span>, georaster);

      <span class="hljs-title function_">fetch</span>(<span class="hljs-string">"collection/stanford_campus.geojson"</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">r</span> =&gt;</span> r.<span class="hljs-title function_">json</span>())
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">maskGeojson</span> =&gt;</span> {
          <span class="hljs-keyword">var</span> layer = <span class="hljs-keyword">new</span> <span class="hljs-title class_">GeoRasterLayer</span>({
            <span class="hljs-attr">attribution</span>: <span class="hljs-string">"Planet"</span>,
            <span class="hljs-attr">georaster</span>: georaster,
            <span class="hljs-attr">resolution</span>: <span class="hljs-number">128</span>,
            <span class="hljs-attr">mask</span>: maskGeojson
          });

          layer.<span class="hljs-title function_">addTo</span>(map);
          map.<span class="hljs-title function_">fitBounds</span>(layer.<span class="hljs-title function_">getBounds</span>());
        });
    }).<span class="hljs-title function_">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>);

    <span class="hljs-title function_">fetch</span>(<span class="hljs-string">'collection/stanford_public_art.geojson'</span>)
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> response.<span class="hljs-title function_">json</span>())
        .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">data</span> =&gt;</span> {
            <span class="hljs-keyword">const</span> artworkLayer = L.<span class="hljs-title function_">geoJSON</span>(data, {
                <span class="hljs-attr">pointToLayer</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">feature, latlng</span>) {
                    <span class="hljs-keyword">return</span> L.<span class="hljs-title function_">circleMarker</span>(latlng, {
                        <span class="hljs-attr">radius</span>: <span class="hljs-number">6</span>,
                        <span class="hljs-attr">color</span>: <span class="hljs-string">'white'</span>,
                        <span class="hljs-attr">weight</span>: <span class="hljs-number">2</span>,
                        <span class="hljs-attr">fillColor</span>: <span class="hljs-string">'blue'</span>,
                        <span class="hljs-attr">fillOpacity</span>: <span class="hljs-number">0.7</span>
                    });
                },
                <span class="hljs-attr">onEachFeature</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">feature, layer</span>) {
                    <span class="hljs-keyword">const</span> props = feature.<span class="hljs-property">properties</span> || {};
                    <span class="hljs-keyword">const</span> title = props.<span class="hljs-property">name</span> || <span class="hljs-string">'Artwork'</span>;
                    <span class="hljs-keyword">const</span> artist = props.<span class="hljs-property">artist_name</span>;
                    <span class="hljs-keyword">const</span> type = props.<span class="hljs-property">artwork_type</span>;

                    <span class="hljs-keyword">let</span> popupContent = <span class="hljs-string">'&lt;div style="min-width:200px;"&gt;'</span>;
                    popupContent += <span class="hljs-string">'&lt;b&gt;'</span> + title + <span class="hljs-string">'&lt;/b&gt;&lt;br&gt;'</span>;
                    <span class="hljs-keyword">if</span> (artist) popupContent += <span class="hljs-string">'&lt;b&gt;Artist:&lt;/b&gt; '</span> + artist + <span class="hljs-string">'&lt;br&gt;'</span>;
                    <span class="hljs-keyword">if</span> (type) popupContent += <span class="hljs-string">'&lt;b&gt;Type:&lt;/b&gt; '</span> + type;
                    popupContent += <span class="hljs-string">'&lt;/div&gt;'</span>;

                    layer.<span class="hljs-title function_">bindPopup</span>(popupContent);

                    <span class="hljs-comment">// Add click handler to display Wikidata info</span>
                    layer.<span class="hljs-title function_">on</span>(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) {
                        <span class="hljs-keyword">if</span> (props.<span class="hljs-property">wikidata</span>) {
                            <span class="hljs-title function_">displayWikidataInfo</span>(props.<span class="hljs-property">wikidata</span>);
                        } <span class="hljs-keyword">else</span> {
                            <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'wikidata-panel'</span>).<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;div id="no-selection"&gt;No Wikidata ID available for this artwork&lt;/div&gt;'</span>;
                        }
                    });
                }
            }).<span class="hljs-title function_">addTo</span>(map);

            map.<span class="hljs-title function_">fitBounds</span>(artworkLayer.<span class="hljs-title function_">getBounds</span>());
        })
        .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">'Error loading GeoJSON:'</span>, error));

</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span>
</code></pre>
<h2 id="whats-new">What's New?</h2>
<h3 id="1-the-getwikidatalabel-helper-function">1. The getWikidataLabel() Helper Function</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getWikidataLabel</span>(<span class="hljs-params">itemId</span>) {
    <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`https://www.wikidata.org/wiki/Special:EntityData/<span class="hljs-subst">${itemId}</span>.json`</span>);
        <span class="hljs-keyword">const</span> data = <span class="hljs-keyword">await</span> response.<span class="hljs-title function_">json</span>();
        <span class="hljs-keyword">const</span> entity = data.<span class="hljs-property">entities</span>[itemId];

        <span class="hljs-keyword">return</span> entity.<span class="hljs-property">labels</span>.<span class="hljs-property">en</span> ? entity.<span class="hljs-property">labels</span>.<span class="hljs-property">en</span>.<span class="hljs-property">value</span> : itemId;
    } <span class="hljs-keyword">catch</span> (error) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">`Error fetching label for <span class="hljs-subst">${itemId}</span>:`</span>, error);
        <span class="hljs-keyword">return</span> itemId;
    }
}
</code></pre>
<p><strong>Why do we need this?</strong></p>
<p>When we access properties like P170 (creator), we get a <strong>reference to another item</strong>, not the name:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// We get this:</span>
{
  <span class="hljs-string">"datavalue"</span>: {
    <span class="hljs-string">"value"</span>: {
      <span class="hljs-string">"id"</span>: <span class="hljs-string">"Q315277"</span>
    }
  }
}

<span class="hljs-comment">// But we want this:</span>
<span class="hljs-string">"Mark di Suvero"</span>
</code></pre>
<p><strong>This helper:</strong></p>
<ol>
<li>Takes a <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> item ID (like "Q315277")</li>
<li>Fetches that item's data</li>
<li>Extracts the English label</li>
<li>Returns the human-readable name</li>
</ol>
<p><strong>It's <code>async</code> because</strong> it makes a network request.</p>
<h3 id="2-linked-data-and-entity-references">2. Linked Data and Entity References</h3>
<p><strong><a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> uses <a href="GLOSSARY.html#linked-data" class="glossary-term" title="A method of connecting related data across different sources using references (like Wikidata items linking to other items).">linked data</a></strong> - items link to other items:</p>
<pre><code>"Gay Liberation" (Q16270988)
    ↓
    P170 (creator)
    ↓
    George Segal (Q500837)
</code></pre><p><strong>In the JSON:</strong></p>
<pre><code class="lang-javascript">entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P170</span>[<span class="hljs-number">0</span>].<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>
<span class="hljs-comment">// Returns: "Q500837"</span>
</code></pre>
<p><strong>To get the name, we fetch Q500837:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> creatorName = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getWikidataLabel</span>(<span class="hljs-string">"Q500837"</span>);
<span class="hljs-comment">// Returns: "George Segal"</span>
</code></pre>
<h3 id="3-extracting-creator-information-p170">3. Extracting Creator Information (P170)</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span> (entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P170</span>) {
    <span class="hljs-keyword">const</span> creatorId = entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P170</span>[<span class="hljs-number">0</span>].<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>;
    <span class="hljs-keyword">const</span> creatorName = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getWikidataLabel</span>(creatorId);
    html += <span class="hljs-string">`&lt;div class="wikidata-property"&gt;&lt;strong&gt;Creator:&lt;/strong&gt; &lt;a href="https://www.wikidata.org/wiki/<span class="hljs-subst">${creatorId}</span>" target="_blank"&gt;<span class="hljs-subst">${creatorName}</span>&lt;/a&gt;&lt;/div&gt;`</span>;
}
</code></pre>
<p><strong>Step by step:</strong></p>
<ol>
<li>Check if P170 exists</li>
<li>Extract the item ID from the first claim</li>
<li>Fetch the label for that item ID</li>
<li>Build HTML with the name and a link to the creator's <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> page</li>
</ol>
<p><strong>Why <code>await</code>?</strong> The <code>getWikidataLabel()</code> <a href="GLOSSARY.html#function" class="glossary-term" title="A reusable block of code that performs a specific task. Can accept input (parameters) and return output.">function</a> is <a href="GLOSSARY.html#asynchronous" class="glossary-term" title="Code that doesn't block execution while waiting for operations (like network requests) to complete. Allows other code to run while waiting.">asynchronous</a> - it needs to fetch data from the API.</p>
<h3 id="4-handling-multiple-properties-p61">4. Handling Multiple Properties (P61)</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span> (entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P61</span>) {
    <span class="hljs-keyword">const</span> inventorId = entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P61</span>[<span class="hljs-number">0</span>].<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>;
    <span class="hljs-keyword">const</span> inventorName = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getWikidataLabel</span>(inventorId);
    html += <span class="hljs-string">`&lt;div class="wikidata-property"&gt;&lt;strong&gt;Artist:&lt;/strong&gt; &lt;a href="https://www.wikidata.org/wiki/<span class="hljs-subst">${inventorId}</span>" target="_blank"&gt;<span class="hljs-subst">${inventorName}</span>&lt;/a&gt;&lt;/div&gt;`</span>;
}
</code></pre>
<p><strong>Why check for P61?</strong> Different items use different properties:</p>
<ul>
<li>P170 = Creator (general)</li>
<li>P61 = Discoverer or inventor (sometimes used for sculptures)</li>
</ul>
<p>Some artworks use one, some use the other, some use both.</p>
<h3 id="5-date-extraction-and-formatting-p571">5. Date Extraction and Formatting (P571)</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span> (entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P571</span>) {
    <span class="hljs-keyword">const</span> dateValue = entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P571</span>[<span class="hljs-number">0</span>].<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">time</span>;
    <span class="hljs-keyword">const</span> year = dateValue.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/[+-](\d{4})/</span>)[<span class="hljs-number">1</span>];
    html += <span class="hljs-string">`&lt;div class="wikidata-property"&gt;&lt;strong&gt;Date:&lt;/strong&gt; <span class="hljs-subst">${year}</span>&lt;/div&gt;`</span>;
}
</code></pre>
<p><strong><a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> date format:</strong></p>
<pre><code>"+1980-01-01T00:00:00Z"
</code></pre><p><strong>Components:</strong></p>
<ul>
<li><code>+</code> or <code>-</code> = BCE/CE</li>
<li><code>1980</code> = Year</li>
<li><code>01-01</code> = Month and day</li>
<li><code>T00:00:00Z</code> = Time (usually 00:00:00 for dates)</li>
</ul>
<p><strong>Using regex to extract the year:</strong></p>
<pre><code class="lang-javascript">dateValue.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/[+-](\d{4})/</span>)
</code></pre>
<p><strong>Breakdown:</strong></p>
<ul>
<li><code>/[+-]</code> = Match + or -</li>
<li><code>(\d{4})</code> = Capture 4 digits (the year)</li>
<li><code>[1]</code> = Get the first capture group (the year)</li>
</ul>
<p><strong>Why just the year?</strong> Often that's all we need, and it's simpler to display.</p>
<p><strong>More complex date handling:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-comment">// Extract full date</span>
<span class="hljs-keyword">const</span> dateMatch = dateValue.<span class="hljs-title function_">match</span>(<span class="hljs-regexp">/([+-])(\d{4})-(\d{2})-(\d{2})/</span>);
<span class="hljs-keyword">const</span> era = dateMatch[<span class="hljs-number">1</span>] === <span class="hljs-string">'+'</span> ? <span class="hljs-string">'CE'</span> : <span class="hljs-string">'BCE'</span>;
<span class="hljs-keyword">const</span> year = dateMatch[<span class="hljs-number">2</span>];
<span class="hljs-keyword">const</span> month = dateMatch[<span class="hljs-number">3</span>];
<span class="hljs-keyword">const</span> day = dateMatch[<span class="hljs-number">4</span>];

html += <span class="hljs-string">`&lt;div&gt;&lt;strong&gt;Date:&lt;/strong&gt; <span class="hljs-subst">${year}</span>-<span class="hljs-subst">${month}</span>-<span class="hljs-subst">${day}</span> <span class="hljs-subst">${era}</span>&lt;/div&gt;`</span>;
</code></pre>
<h3 id="6-handling-multiple-values-materials">6. Handling Multiple Values (Materials)</h3>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span> (entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P186</span>) {
    <span class="hljs-keyword">const</span> materials = [];
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> claim <span class="hljs-keyword">of</span> entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P186</span>) {
        <span class="hljs-keyword">const</span> materialId = claim.<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>;
        <span class="hljs-keyword">const</span> materialName = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getWikidataLabel</span>(materialId);
        materials.<span class="hljs-title function_">push</span>(<span class="hljs-string">`&lt;a href="https://www.wikidata.org/wiki/<span class="hljs-subst">${materialId}</span>" target="_blank"&gt;<span class="hljs-subst">${materialName}</span>&lt;/a&gt;`</span>);
    }
    html += <span class="hljs-string">`&lt;div class="wikidata-property"&gt;&lt;strong&gt;Material:&lt;/strong&gt; <span class="hljs-subst">${materials.join(<span class="hljs-string">', '</span>)}</span>&lt;/div&gt;`</span>;
}
</code></pre>
<p><strong>Why <a href="GLOSSARY.html#loop" class="glossary-term" title="A programming structure that repeats code multiple times. Example: for (let i = 0; i < 10; i++)">loop</a>?</strong> An artwork can be made from multiple materials:</p>
<ul>
<li>Bronze</li>
<li>Steel</li>
<li>Paint</li>
<li>Wood</li>
</ul>
<p><strong>The process:</strong></p>
<ol>
<li>Create an empty <a href="GLOSSARY.html#array" class="glossary-term" title="A data structure that holds multiple values in a single variable, accessed by index numbers. Example: ['red', 'blue', 'green']">array</a>: <code>materials = []</code></li>
<li><a href="GLOSSARY.html#loop" class="glossary-term" title="A programming structure that repeats code multiple times. Example: for (let i = 0; i < 10; i++)">Loop</a> through all P186 claims</li>
<li>For each claim, get the material ID</li>
<li>Fetch the label for that material</li>
<li>Create an HTML link and add to <a href="GLOSSARY.html#array" class="glossary-term" title="A data structure that holds multiple values in a single variable, accessed by index numbers. Example: ['red', 'blue', 'green']">array</a></li>
<li>Join all materials with commas</li>
</ol>
<p><strong>Result:</strong></p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Material:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"..."</span>&gt;</span>Bronze<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>, <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">"..."</span>&gt;</span>Steel<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</code></pre>
<p><strong>Understanding <code>await</code> in a <a href="GLOSSARY.html#loop" class="glossary-term" title="A programming structure that repeats code multiple times. Example: for (let i = 0; i < 10; i++)">loop</a>:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> claim <span class="hljs-keyword">of</span> entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P186</span>) {
    <span class="hljs-keyword">const</span> materialName = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getWikidataLabel</span>(materialId);  <span class="hljs-comment">// Waits for each request</span>
    materials.<span class="hljs-title function_">push</span>(...);
}
</code></pre>
<p><strong>Important:</strong> Each <code>await</code> pauses until the request completes. With many materials, this could be slow. For better performance, use <code>Promise.all()</code>:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> materialPromises = entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P186</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">claim</span> =&gt;</span> 
    <span class="hljs-title function_">getWikidataLabel</span>(claim.<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>)
);
<span class="hljs-keyword">const</span> materialNames = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>(materialPromises);  <span class="hljs-comment">// Fetch all at once!</span>
</code></pre>
<h3 id="7-building-rich-html-content">7. Building Rich HTML Content</h3>
<pre><code class="lang-javascript">html += <span class="hljs-string">`&lt;div class="wikidata-property"&gt;&lt;strong&gt;Creator:&lt;/strong&gt; &lt;a href="..." target="_blank"&gt;<span class="hljs-subst">${creatorName}</span>&lt;/a&gt;&lt;/div&gt;`</span>;
</code></pre>
<p><strong>Template literals</strong> make it easy to build complex HTML:</p>
<p><strong>Components:</strong></p>
<ul>
<li><code>&lt;strong&gt;Creator:&lt;/strong&gt;</code> - Bold label</li>
<li><code>&lt;a href="..." target="_blank"&gt;</code> - Link that opens in new tab</li>
<li><code>${creatorName}</code> - <a href="GLOSSARY.html#variable" class="glossary-term" title="A named container for storing data values. Declared with var, let, or const.">Variable</a> interpolation</li>
<li><code>&lt;/a&gt;&lt;/div&gt;</code> - Close tags</li>
</ul>
<p><strong>Result (when rendered):</strong></p>
<p><strong>Creator:</strong> <a href="https://www.wikidata.org/wiki/Q315277" target="_blank">Mark di Suvero</a></p>
<h2 id="understanding-wikidatas-data-structure">Understanding Wikidata's Data Structure</h2>
<p><strong>Anatomy of a claim:</strong></p>
<pre><code class="lang-json">{
  <span class="hljs-string">"mainsnak"</span>: {
    <span class="hljs-string">"snaktype"</span>: <span class="hljs-string">"value"</span>,
    <span class="hljs-string">"property"</span>: <span class="hljs-string">"P170"</span>,
    <span class="hljs-string">"datatype"</span>: <span class="hljs-string">"wikibase-item"</span>,
    <span class="hljs-string">"datavalue"</span>: {
      <span class="hljs-string">"value"</span>: {
        <span class="hljs-string">"entity-type"</span>: <span class="hljs-string">"item"</span>,
        <span class="hljs-string">"numeric-id"</span>: <span class="hljs-number">315277</span>,
        <span class="hljs-string">"id"</span>: <span class="hljs-string">"Q315277"</span>
      },
      <span class="hljs-string">"type"</span>: <span class="hljs-string">"wikibase-entityid"</span>
    }
  }
}
</code></pre>
<p><strong>Path to extract the ID:</strong></p>
<pre><code class="lang-javascript">claim.<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>
</code></pre>
<p><strong>Different data types:</strong></p>
<p><strong>Item reference (P170, P186):</strong></p>
<pre><code class="lang-javascript">value.<span class="hljs-property">id</span>  <span class="hljs-comment">// "Q315277"</span>
</code></pre>
<p><strong><a href="GLOSSARY.html#string" class="glossary-term" title="A data type representing text. Created with quotes: &quot;text&quot; or 'text'">String</a> (P1476 - title):</strong></p>
<pre><code class="lang-javascript">value  <span class="hljs-comment">// "Gay Liberation"</span>
</code></pre>
<p><strong>Time (P571 - inception):</strong></p>
<pre><code class="lang-javascript">value.<span class="hljs-property">time</span>  <span class="hljs-comment">// "+1980-01-01T00:00:00Z"</span>
</code></pre>
<p><strong>Quantity (P2048 - height):</strong></p>
<pre><code class="lang-javascript">value.<span class="hljs-property">amount</span>  <span class="hljs-comment">// "+4.5"</span>
value.<span class="hljs-property">unit</span>    <span class="hljs-comment">// "http://www.wikidata.org/entity/Q11573"</span>
</code></pre>
<h2 id="complete-data-flow-example">Complete Data Flow Example</h2>
<p><strong>When user clicks on "Gay Liberation" sculpture:</strong></p>
<ol>
<li>Click handler calls <code>displayWikidataInfo("Q16270988")</code></li>
<li>Fetch <code>https://www.wikidata.org/wiki/Special:EntityData/Q16270988.json</code></li>
<li>Parse JSON <a href="GLOSSARY.html#response" class="glossary-term" title="Data returned from an API request.">response</a></li>
<li>Extract image (P18) → "Gay Liberation sculpture 04.jpg"</li>
<li>Extract label → "Gay Liberation"</li>
<li>Extract description → "sculpture by George Segal"</li>
<li>Extract creator (P170) → "Q500837"<ul>
<li>Call <code>getWikidataLabel("Q500837")</code></li>
<li>Fetch <code>https://www.wikidata.org/wiki/Special:EntityData/Q500837.json</code></li>
<li>Parse JSON → "George Segal"</li>
</ul>
</li>
<li>Extract inception (P571) → "+1980-01-01T00:00:00Z" → "1980"</li>
<li>Extract materials (P186) → ["Q34095"]<ul>
<li>Call <code>getWikidataLabel("Q34095")</code></li>
<li>Fetch and parse → "Bronze"</li>
</ul>
</li>
<li>Build HTML with all information</li>
<li>Update <a href="GLOSSARY.html#panel" class="glossary-term" title="A section of the interface, typically containing specific information or controls.">panel</a> with <code>innerHTML</code></li>
</ol>
<p><strong>Total API requests:</strong> 3-5 (depending on number of materials)</p>
<h2 id="performance-considerations">Performance Considerations</h2>
<p><strong>Multiple async requests:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-comment">// Sequential (slower)</span>
<span class="hljs-keyword">const</span> creator = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getWikidataLabel</span>(creatorId);     <span class="hljs-comment">// Wait</span>
<span class="hljs-keyword">const</span> material = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getWikidataLabel</span>(materialId);   <span class="hljs-comment">// Wait</span>
<span class="hljs-comment">// Total time: Request1 + Request2</span>

<span class="hljs-comment">// Parallel (faster)</span>
<span class="hljs-keyword">const</span> [creator, material] = <span class="hljs-keyword">await</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([
    <span class="hljs-title function_">getWikidataLabel</span>(creatorId),
    <span class="hljs-title function_">getWikidataLabel</span>(materialId)
]);
<span class="hljs-comment">// Total time: Max(Request1, Request2)</span>
</code></pre>
<p><strong>Caching labels:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> labelCache = {};

<span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getWikidataLabel</span>(<span class="hljs-params">itemId</span>) {
    <span class="hljs-keyword">if</span> (labelCache[itemId]) {
        <span class="hljs-keyword">return</span> labelCache[itemId];  <span class="hljs-comment">// Return cached value</span>
    }

    <span class="hljs-comment">// ... fetch logic ...</span>

    labelCache[itemId] = label;  <span class="hljs-comment">// Store in cache</span>
    <span class="hljs-keyword">return</span> label;
}
</code></pre>
<h2 id="try-it-yourself">Try It Yourself</h2>
<ol>
<li><strong>Copy the complete code</strong> into <code>step-09.html</code></li>
<li><strong>Ensure <code>styles_wikidata.css</code> exists</strong></li>
<li><strong>Open in your <a href="GLOSSARY.html#browser" class="glossary-term" title="Software application used to access and display web pages (Chrome, Firefox, Safari, Edge).">browser</a></strong></li>
<li><strong>Click different artworks</strong></li>
</ol>
<p>You should now see comprehensive information about each artwork!</p>
<h3 id="experiments">Experiments</h3>
<p><strong>Add more properties:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-comment">// Location (P276)</span>
<span class="hljs-keyword">if</span> (entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P276</span>) {
    <span class="hljs-keyword">const</span> locationId = entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P276</span>[<span class="hljs-number">0</span>].<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>;
    <span class="hljs-keyword">const</span> locationName = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getWikidataLabel</span>(locationId);
    html += <span class="hljs-string">`&lt;div&gt;&lt;strong&gt;Location:&lt;/strong&gt; <span class="hljs-subst">${locationName}</span>&lt;/div&gt;`</span>;
}

<span class="hljs-comment">// Height (P2048)</span>
<span class="hljs-keyword">if</span> (entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P2048</span>) {
    <span class="hljs-keyword">const</span> height = entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P2048</span>[<span class="hljs-number">0</span>].<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">amount</span>;
    <span class="hljs-keyword">const</span> unit = entity.<span class="hljs-property">claims</span>.<span class="hljs-property">P2048</span>[<span class="hljs-number">0</span>].<span class="hljs-property">mainsnak</span>.<span class="hljs-property">datavalue</span>.<span class="hljs-property">value</span>.<span class="hljs-property">unit</span>;
    html += <span class="hljs-string">`&lt;div&gt;&lt;strong&gt;Height:&lt;/strong&gt; <span class="hljs-subst">${height}</span> meters&lt;/div&gt;`</span>;
}
</code></pre>
<p><strong>Format dates differently:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> dateOptions = { <span class="hljs-attr">year</span>: <span class="hljs-string">'numeric'</span>, <span class="hljs-attr">month</span>: <span class="hljs-string">'long'</span>, <span class="hljs-attr">day</span>: <span class="hljs-string">'numeric'</span> };
<span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(dateValue);
<span class="hljs-keyword">const</span> formatted = date.<span class="hljs-title function_">toLocaleDateString</span>(<span class="hljs-string">'en-US'</span>, dateOptions);
<span class="hljs-comment">// Result: "January 1, 1980"</span>
</code></pre>
<p><strong>Add loading indicators:</strong></p>
<pre><code class="lang-javascript"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">displayWikidataInfo</span>(<span class="hljs-params">wikidataId</span>) {
    <span class="hljs-keyword">const</span> panel = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">'wikidata-panel'</span>);
    panel.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">'&lt;div class="loading"&gt;Loading...&lt;/div&gt;'</span>;

    <span class="hljs-comment">// ... fetch and display code ...</span>
}
</code></pre>
<p><strong>Group properties by category:</strong></p>
<pre><code class="lang-javascript">html += <span class="hljs-string">'&lt;h3&gt;Basic Information&lt;/h3&gt;'</span>;
<span class="hljs-comment">// ... label, description ...</span>

html += <span class="hljs-string">'&lt;h3&gt;Creator Information&lt;/h3&gt;'</span>;
<span class="hljs-comment">// ... creator, date ...</span>

html += <span class="hljs-string">'&lt;h3&gt;Physical Properties&lt;/h3&gt;'</span>;
<span class="hljs-comment">// ... materials, dimensions ...</span>
</code></pre>
<h2 id="connection-to-digital-stacks">Connection to Digital Stacks</h2>
<p><strong>This complete application works seamlessly with SDR:</strong></p>
<pre><code>Your local project/
├── index.html (with all Wikidata integration)
├── styles_wikidata.css
└── collection/
    ├── stanford_campus_irg.tif
    ├── stanford_campus.geojson
    └── stanford_public_art.geojson

After SDR deposit → DRUID: abc123xyz456

Deployed at:
https://stacks.stanford.edu/file/druid:abc123xyz456/index.html

Works because:
✓ All local files use relative paths

**Related resources:**
- Stanford Digital Repository: https://sdr.stanford.edu/
- Stanford Libraries APIs: https://api.library.stanford.edu/
- Stanford Geospatial Center: https://gis.stanford.edu/
✓ External APIs (Wikidata, OpenStreetMap) use absolute URLs
✓ JavaScript executes client-side
✓ No server-side processing needed
</code></pre><p><strong>Advantages of this approach:</strong></p>
<ul>
<li>Data stays current (<a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> updates automatically)  </li>
<li>Minimal deposit size (no duplicate data storage)  </li>
<li>Rich, linked information  </li>
<li>Works anywhere, including SDR  </li>
<li>No API keys required  </li>
</ul>
<h2 id="best-practices-demonstrated">Best Practices Demonstrated</h2>
<ul>
<li><strong>Modular code</strong> - Helper functions separate concerns  </li>
<li><strong>Error handling</strong> -<a href="GLOSSARY.html#try-catch" class="glossary-term" title="JavaScript error handling structure that attempts code and catches errors if they occur.">Try-catch</a>prevents crashes  </li>
<li><strong><a href="GLOSSARY.html#defensive-programming" class="glossary-term" title="Writing code that checks for potential errors before they occur. Example: if (data) { use(data); }">Defensive programming</a></strong> - Check if data exists  </li>
<li><strong>User feedback</strong> - Show loading states and errors  </li>
<li><strong><a href="GLOSSARY.html#semantic-html" class="glossary-term" title="Using HTML elements according to their meaning (e.g., <header>, <nav>, <article>).">Semantic HTML</a></strong> - Proper structure and classes  </li>
<li><strong>Accessibility</strong> - Alt text, descriptive links  </li>
<li><strong>Performance awareness</strong> - Async operations  </li>
<li><strong>Code reusability</strong> - Same helpers work for any property  </li>
</ul>
<h2 id="whats-next">What's Next?</h2>
<p>You now have a complete, working interactive map application that:</p>
<ul>
<li>Displays a custom map with COG imagery</li>
<li>Shows artwork locations from <a href="GLOSSARY.html#geojson" class="glossary-term" title="A format for encoding geographic data structures using JSON. Defines features with geometry and properties.">GeoJSON</a></li>
<li>Fetches rich data from <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a></li>
<li>Displays images from <a href="GLOSSARY.html#wikimedia-commons" class="glossary-term" title="A free media repository containing images, videos, and other files that can be used by anyone.">Wikimedia Commons</a></li>
<li>Presents comprehensive information in a clean layout</li>
<li>Works perfectly when deployed to Stanford <a href="GLOSSARY.html#digital-repository" class="glossary-term" title="A system for storing, managing, and providing access to digital content over time.">Digital Repository</a></li>
</ul>
<p><strong>Possible enhancements:</strong></p>
<ul>
<li>Add search functionality</li>
<li>Implement filtering by artist or date</li>
<li>Create a gallery view</li>
<li>Add image carousels for multiple images</li>
<li>Integrate with other APIs (OpenStreetMap, Wikipedia)</li>
<li>Add map layers for different datasets</li>
<li>Create print-friendly views</li>
<li>Add social sharing features</li>
</ul>
<p><strong>Deployment:</strong></p>
<ol>
<li>Prepare your files (HTML, CSS, <a href="GLOSSARY.html#geojson" class="glossary-term" title="A format for encoding geographic data structures using JSON. Defines features with geometry and properties.">GeoJSON</a>, <a href="GLOSSARY.html#geotiff" class="glossary-term" title="A file format for storing geospatial raster images with geographic metadata.">GeoTIFF</a>)</li>
<li>Submit to SDR with appropriate metadata</li>
<li>Receive your DRUID</li>
<li>Share: <code>https://stacks.stanford.edu/file/druid:YOUR_DRUID/index.html</code></li>
</ol>
<h2 id="key-takeaways">Key Takeaways</h2>
<ul>
<li><a href="GLOSSARY.html#linked-data" class="glossary-term" title="A method of connecting related data across different sources using references (like Wikidata items linking to other items).">Linked data</a> connects related entities across a knowledge base  </li>
<li>Helper functions reduce code duplication and improve maintainability  </li>
<li>Async/<a href="GLOSSARY.html#await" class="glossary-term" title="A JavaScript keyword used with async functions to pause execution until a Promise resolves. Must be inside an async function.">await</a> handles multiple dependent API calls cleanly  </li>
<li>Different properties require different data extraction strategies  </li>
<li>Regex is useful for parsing formatted strings like dates  </li>
<li>Looping with <code>await</code> fetches data sequentially (consider <a href="GLOSSARY.html#promise" class="glossary-term" title="JavaScript object representing the eventual completion or failure of an asynchronous operation.">Promise</a>.all() for parallel)  </li>
<li>Building rich, dynamic interfaces requires careful HTML construction  </li>
<li>External APIs enhance local data without bloating deposits  </li>
<li>Comprehensive applications can be built with<a href="GLOSSARY.html#client-side" class="glossary-term" title="Code that runs in the user's browser, not on a server.">client-side</a>JavaScript  </li>
<li>SDR provides stable, long-term hosting for interactive web applications  </li>
</ul>
<h2 id="common-questions">Common Questions</h2>
<p><strong>Q: How do I find other <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> properties?</strong><br></br>A: Browse an item on <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a>.org, or check the <a href="https://www.wikidata.org/wiki/Wikidata:List_of_properties" target="_blank">Wikidata property list</a>.</p>
<p><strong>Q: Can I contribute to <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a>?</strong><br></br>A: Yes! <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> is open for anyone to edit. Create an account and start contributing.</p>
<p><strong>Q: What if an item has no English label?</strong><br></br>A: Modify <code>getWikidataLabel()</code> to fall back to other languages:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">return</span> entity.<span class="hljs-property">labels</span>.<span class="hljs-property">en</span>?.<span class="hljs-property">value</span> || entity.<span class="hljs-property">labels</span>.<span class="hljs-property">es</span>?.<span class="hljs-property">value</span> || entity.<span class="hljs-property">labels</span>.<span class="hljs-property">fr</span>?.<span class="hljs-property">value</span> || itemId;
</code></pre>
<p><strong>Q: Are there rate limits?</strong><br></br>A: <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> is generous, but don't make hundreds of rapid requests. Consider caching.</p>
<p><strong>Q: Can I edit <a href="GLOSSARY.html#wikidata" class="glossary-term" title="A free, open knowledge base of structured data that can be read and edited by humans and machines.">Wikidata</a> programmatically?</strong><br></br>A: Yes, with authentication. See <a href="https://www.wikidata.org/wiki/Wikidata:Data_access" target="_blank">Wikidata API documentation</a>.</p>
<p><strong>Q: How do I handle items with incomplete data?</strong><br></br>A: Use defensive checks (<code>if (entity.claims.P170)</code>) as shown in this tutorial.</p>
<p><strong>Q: What about copyright for images?</strong><br></br>A: <a href="GLOSSARY.html#wikimedia-commons" class="glossary-term" title="A free media repository containing images, videos, and other files that can be used by anyone.">Wikimedia Commons</a> files have licenses. Check each file's license page for specific terms.</p>
<hr></hr>
<p><strong>Previous:</strong> <a href="09-step-08-wikidata-images.html">Step 8: Wikidata Images</a> | <strong>Next:</strong> <a href="11-bonus-step-10-wikidata-filter.html">BONUS Step 10: Wikidata Filter</a> | <strong>Workshop Materials:</strong> <a href="WORKSHOP-MATERIALS.html">Index</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="09-step-08-wikidata-images.html" class="navigation navigation-prev " aria-label="Previous page: Step 8: Wikidata Images">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="11-bonus-step-10-wikidata-filter.html" class="navigation navigation-next " aria-label="Next page: BONUS Step 10: Wikidata Filter">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Step 9: Complete Integration","level":"2.10","depth":1,"next":{"title":"BONUS Step 10: Wikidata Filter","level":"2.11","depth":1,"path":"11-bonus-step-10-wikidata-filter.md","ref":"11-bonus-step-10-wikidata-filter.md","articles":[]},"previous":{"title":"Step 8: Wikidata Images","level":"2.9","depth":1,"path":"09-step-08-wikidata-images.md","ref":"09-step-08-wikidata-images.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56},"embedFonts":false},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"10-step-09-complete-integration.md","mtime":"2026-01-26T21:31:17.079Z","type":"markdown"},"gitbook":{"version":"6.1.5","time":"2026-01-26T21:31:27.182Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <noscript>
        <style>
            .honkit-cloak {
                display: block !important;
            }
        </style>
    </noscript>
    <script>
        // Restore sidebar state as critical path for prevent layout shift
        function __init__getSidebarState(defaultValue){
            var baseKey = "";
            var key = baseKey + ":sidebar";
            try {
                var value = localStorage[key];
                if (value === undefined) {
                    return defaultValue;
                }
                var parsed = JSON.parse(value);
                return parsed == null ? defaultValue : parsed;
            } catch (e) {
                return defaultValue;
            }
        }
        function __init__restoreLastSidebarState() {
            var isMobile = window.matchMedia("(max-width: 600px)").matches;
            if (isMobile) {
                // Init last state if not mobile
                return;
            }
            var sidebarState = __init__getSidebarState(true);
            var book = document.querySelector(".book");
            // Show sidebar if it enabled
            if (sidebarState && book) {
                book.classList.add("without-animation", "with-summary");
            }
        }

        try {
            __init__restoreLastSidebarState();
        } finally {
            var book = document.querySelector(".book");
            book.classList.remove("honkit-cloak");
        }
    </script>
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/@honkit/honkit-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

